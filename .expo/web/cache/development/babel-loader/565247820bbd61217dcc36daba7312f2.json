{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\mali2\\\\Documents\\\\admd_project\\\\repairDukaan-main\\\\screens\\\\Map.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { Component, useState, useEffect } from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport MapView, { PROVIDER_GOOGLE, Marker } from 'react-native-maps';\nimport Constants from 'expo-constants';\nimport * as Location from 'expo-location';\nvar user_id = \"602d9002022d673150ce8a28\";\nvar repair_type = \"Car\";\nimport axios from 'axios';\nimport { LogBox } from \"react-native-web/dist/index\";\nimport { connect } from 'react-redux';\nLogBox.ignoreLogs(['Non-serializable values were found in the navigation state', 'Require cycles are allowed, but can result in uninitialized values. Consider refactoring to remove the need for a cycle.']);\n\nvar Delivery = function Delivery(_ref) {\n  var navigation = _ref.navigation,\n      userState = _ref.userState;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMsg = _useState4[0],\n      setErrorMsg = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      log = _useState6[0],\n      setlog = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      data = _useState8[0],\n      setData = _useState8[1];\n\n  var _useState9 = useState({\n    latitude: 0,\n    longitude: 0,\n    latitudeDelta: 0.025,\n    longitudeDelta: 0.025\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      region = _useState10[0],\n      setRegion = _useState10[1];\n\n  var handleSubmitCar = function handleSubmitCar() {\n    return _regeneratorRuntime.async(function handleSubmitCar$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios.post('https://enigmatic-mesa-42065.herokuapp.com/user/submit', {\n              user_id: userState.userInfo.id,\n              location: {\n                latitude: region.latitude,\n                longitude: region.longitude\n              },\n              repair_type: repair_type\n            }).then(function (res) {\n              if (res.data.body.status == \"Sorry No worker Available\") {\n                Alert.alert(\"No worker Available\");\n              } else {\n                console.log(res.data.body);\n                var startDate = new Date();\n                setData(res.data.body.details.id);\n                navigation.navigate('Tracker', {\n                  data: res.data.body.details.id,\n                  start: startDate,\n                  worker_id: res.data.body.details.worker_id\n                });\n              }\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleSubmitBike = function handleSubmitBike() {\n    return _regeneratorRuntime.async(function handleSubmitBike$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(axios.post('https://enigmatic-mesa-42065.herokuapp.com/user/submit', {\n              user_id: userState.userInfo.id,\n              location: {\n                latitude: region.latitude,\n                longitude: region.longitude\n              },\n              repair_type: 'Bike'\n            }).then(function (res) {\n              if (res.data.body.status == \"Sorry No worker Available\") {\n                Alert.alert(\"No worker Available\");\n              } else {\n                console.log(res.data.body);\n                var startDate = new Date();\n                setData(res.data.body.details.id);\n                navigation.navigate('Tracker', {\n                  data: res.data.body.details.id,\n                  start: startDate,\n                  worker_id: res.data.body.details.worker_id\n                });\n              }\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getaddress = function getaddress(lat, lng) {\n    var addressComponent;\n    return _regeneratorRuntime.async(function getaddress$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(axios.get(\"http://www.mapquestapi.com/geocoding/v1/reverse?key=\" + KEY + \"&location=\" + lat + \",\" + lng + \"&includeRoadMetadata=true&includeNearestIntersection=true\", {\n              headers: {\n                \"Content-type\": \"application/json\"\n              }\n            }).then(function (response) {\n              console.log(response.data);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Location$reque, status, location;\n\n      return _regeneratorRuntime.async(function _callee$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context4.sent;\n              status = _await$Location$reque.status;\n\n              if (!(status !== 'granted')) {\n                _context4.next = 7;\n                break;\n              }\n\n              setErrorMsg('Permission to access location was denied');\n              return _context4.abrupt(\"return\");\n\n            case 7:\n              _context4.next = 9;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 9:\n              location = _context4.sent;\n              setLocation(location);\n              setRegion(_objectSpread(_objectSpread({}, region), {}, {\n                longitude: location.coords.longitude,\n                latitude: location.coords.latitude\n              }));\n\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  var text = 'Waiting..';\n\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location);\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        marginBottom: 0\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, React.createElement(MapView, {\n      style: {\n        flex: 1\n      },\n      showsUserLocation: true,\n      showsMyLocationButton: true,\n      onRegionChangeComplete: setRegion,\n      initialRegion: region,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }), React.createElement(View, {\n      style: {\n        top: '50%',\n        left: '50%',\n        marginLeft: -24,\n        marginTop: -48,\n        position: 'absolute'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, React.createElement(Image, {\n      style: {\n        width: 24,\n        height: 24\n      },\n      source: require(\"../assets/marker.png\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    })), React.createElement(View, {\n      style: styles.row,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: styles.subtn,\n      onPress: handleSubmitCar,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: styles.buttonTextStyle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 77\n      }\n    }, \"Car\")), React.createElement(Text, {\n      style: {\n        color: 'black',\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, \" \"), React.createElement(TouchableOpacity, {\n      style: styles.subtn,\n      onPress: handleSubmitBike,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: styles.buttonTextStyle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 78\n      }\n    }, \"Bike\"))));\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.paragraph,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, text));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingTop: Constants.statusBarHeight,\n    backgroundColor: '#ecf0f1'\n  },\n  paragraph: {\n    margin: 24,\n    fontSize: 18,\n    textAlign: 'center'\n  },\n  buttonTextStyle: {\n    color: 'black',\n    paddingVertical: 10,\n    fontSize: 20\n  },\n  subtn: {\n    backgroundColor: \"whitesmoke\",\n    height: 50,\n    width: 180,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  row: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    width: 1000\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userState: state.user\n  };\n};\n\nexport default connect(mapStateToProps, null)(Delivery);","map":{"version":3,"sources":["C:/Users/mali2/Documents/admd_project/repairDukaan-main/screens/Map.jsx"],"names":["React","Component","useState","useEffect","MapView","PROVIDER_GOOGLE","Marker","Constants","Location","user_id","repair_type","axios","LogBox","connect","ignoreLogs","Delivery","navigation","userState","location","setLocation","errorMsg","setErrorMsg","log","setlog","data","setData","latitude","longitude","latitudeDelta","longitudeDelta","region","setRegion","handleSubmitCar","post","userInfo","id","then","res","body","status","Alert","alert","console","startDate","Date","details","navigate","start","worker_id","catch","err","handleSubmitBike","getaddress","lat","lng","get","KEY","headers","response","requestPermissionsAsync","getCurrentPositionAsync","coords","text","JSON","stringify","flex","marginBottom","top","left","marginLeft","marginTop","position","width","height","require","styles","row","subtn","buttonTextStyle","color","fontWeight","container","paragraph","StyleSheet","create","alignItems","justifyContent","paddingTop","statusBarHeight","backgroundColor","margin","fontSize","textAlign","paddingVertical","flexDirection","flexWrap","mapStateToProps","state","user"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from 'react'\r\nimport { Platform, SafeAreaView, View, TextInput, Text, StyleSheet, Image, Alert, TouchableOpacity } from 'react-native'\r\nimport MapView, { PROVIDER_GOOGLE, Marker } from 'react-native-maps';\r\nimport Constants from 'expo-constants';\r\nimport * as Location from 'expo-location';\r\n\r\n//const KEY = \"WlOfHKQSbaBfAafAodbzvfccj8QYGLtK\"\r\nconst user_id = \"602d9002022d673150ce8a28\"\r\nconst repair_type = \"Car\"\r\nimport axios from 'axios'\r\nimport { LogBox } from 'react-native';\r\nimport { connect } from 'react-redux';\r\nLogBox.ignoreLogs([\r\n  'Non-serializable values were found in the navigation state',\r\n  'Require cycles are allowed, but can result in uninitialized values. Consider refactoring to remove the need for a cycle.'\r\n]);\r\nconst Delivery = ({ navigation, userState }) => {\r\n  const [location, setLocation] = useState(null);\r\n  const [errorMsg, setErrorMsg] = useState(null);\r\n  const [log, setlog] = useState(false);\r\n  const [data, setData] = useState(null);\r\n  const [region, setRegion] = useState({\r\n    latitude: 0,\r\n    longitude: 0,\r\n    latitudeDelta: 0.025,\r\n    longitudeDelta: 0.025\r\n  })\r\n  const handleSubmitCar = async () => {\r\n    //let adr = getaddress(region.latitude,region.longitude)\r\n    await axios.post('https://enigmatic-mesa-42065.herokuapp.com/user/submit', { user_id: userState.userInfo.id, location: { latitude: region.latitude, longitude: region.longitude }, repair_type }).then((res) => {\r\n      if (res.data.body.status == \"Sorry No worker Available\") {\r\n        Alert.alert(\"No worker Available\")\r\n      }\r\n      else {\r\n        console.log(res.data.body)\r\n        var startDate = new Date();\r\n        setData(res.data.body.details.id)\r\n        navigation.navigate('Tracker', { data: res.data.body.details.id, start: startDate, worker_id: res.data.body.details.worker_id })\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    })\r\n  }\r\n  const handleSubmitBike = async () => {\r\n    //let adr = getaddress(region.latitude,region.longitude)\r\n    await axios.post('https://enigmatic-mesa-42065.herokuapp.com/user/submit', { user_id: userState.userInfo.id, location: { latitude: region.latitude, longitude: region.longitude }, repair_type: 'Bike' }).then((res) => {\r\n      if (res.data.body.status == \"Sorry No worker Available\") {\r\n        Alert.alert(\"No worker Available\")\r\n      }\r\n      else {\r\n        console.log(res.data.body)\r\n        var startDate = new Date();\r\n        setData(res.data.body.details.id)\r\n        navigation.navigate('Tracker', { data: res.data.body.details.id, start: startDate, worker_id: res.data.body.details.worker_id })\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    })\r\n  }\r\n  const getaddress = async (lat, lng) => {\r\n    var addressComponent\r\n    await axios.get(\r\n      \"http://www.mapquestapi.com/geocoding/v1/reverse?key=\" + KEY + \"&location=\" + lat + \",\" + lng + \"&includeRoadMetadata=true&includeNearestIntersection=true\",\r\n      {\r\n        headers: {\r\n          \"Content-type\": \"application/json\"\r\n        }\r\n      }\r\n    ).then(\r\n      (response) => {\r\n        console.log(response.data)\r\n      }\r\n    )\r\n  }\r\n  useEffect(() => {\r\n    (async () => {\r\n      let { status } = await Location.requestPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        setErrorMsg('Permission to access location was denied');\r\n        return;\r\n      }\r\n      let location = await Location.getCurrentPositionAsync({});\r\n      setLocation(location);\r\n      setRegion({ ...region, longitude: location.coords.longitude, latitude: location.coords.latitude })\r\n    })();\r\n  }, []);\r\n\r\n  let text = 'Waiting..';\r\n  if (errorMsg) {\r\n    text = errorMsg;\r\n  }\r\n  else if (location) {\r\n    text = JSON.stringify(location);\r\n    return (\r\n      <View style={{ flex: 1, marginBottom: 0 }}>\r\n        <MapView\r\n          style={{ flex: 1 }}\r\n          showsUserLocation={true}\r\n          showsMyLocationButton={true}\r\n          onRegionChangeComplete={setRegion}\r\n          initialRegion={region}\r\n        />\r\n        <View style={{ top: '50%', left: '50%', marginLeft: -24, marginTop: -48, position: 'absolute' }}>\r\n          <Image style={{ width: 24, height: 24 }} source={require('../assets/marker.png')}></Image>\r\n        </View>\r\n        <View style = {styles.row}>\r\n          <TouchableOpacity style={styles.subtn} onPress={handleSubmitCar} ><Text style={styles.buttonTextStyle}>Car</Text></TouchableOpacity>\r\n          <Text style = {{color: 'black', fontWeight: 'bold'}}> </Text>\r\n          <TouchableOpacity style={styles.subtn} onPress={handleSubmitBike} ><Text style={styles.buttonTextStyle}>Bike</Text></TouchableOpacity>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.paragraph}>{text}</Text>\r\n    </View>);\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    paddingTop: Constants.statusBarHeight,\r\n    backgroundColor: '#ecf0f1'\r\n  },\r\n  paragraph: {\r\n    margin: 24,\r\n    fontSize: 18,\r\n    textAlign: 'center'\r\n  },\r\n  buttonTextStyle: {\r\n    color: 'black',\r\n    paddingVertical: 10,\r\n    fontSize: 20,\r\n  },\r\n  subtn: {\r\n    backgroundColor: \"whitesmoke\",\r\n    height: 50,\r\n    width: 180,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  row: {\r\n    flexDirection: 'row',\r\n    flexWrap: 'wrap',\r\n    width: 1000\r\n  }\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    userState: state.user\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Delivery);\r\n"]},"metadata":{},"sourceType":"module"}